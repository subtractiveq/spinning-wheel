<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spinning Wheel Name Picker</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        #wheel { width: 400px; height: 400px; margin: 20px auto; border-radius: 50%; border: 5px solid #333; position: relative; overflow: hidden; }
        #wheel canvas { width: 100%; height: 100%; }
        #spinButton { padding: 10px 20px; font-size: 18px; cursor: pointer; margin-top: 20px; }
        #nameInput { width: 300px; padding: 10px; font-size: 16px; }
        #addButton { padding: 10px 15px; font-size: 16px; margin-left: 10px; }
        ul { list-style-type: none; padding: 0; max-width: 400px; margin: 20px auto; text-align: left; }
        li { background: #f0f0f0; margin-bottom: 5px; padding: 8px; border-radius: 4px; }
        #result { font-size: 24px; margin-top: 20px; height: 30px; }
    </style>
</head>
<body>
    <h1>Spinning Wheel Name Picker</h1>
    <input id="nameInput" placeholder="Enter name" />
    <button id="addButton">Add Name</button>
    <ul id="nameList"></ul>
    <div id="wheel">
        <canvas id="wheelCanvas" width="400" height="400"></canvas>
    </div>
    <button id="spinButton" disabled>Spin the Wheel</button>
    <div id="result"></div>

<script>
    const canvas = document.getElementById('wheelCanvas');
    const ctx = canvas.getContext('2d');
    const spinButton = document.getElementById('spinButton');
    const nameInput = document.getElementById('nameInput');
    const addButton = document.getElementById('addButton');
    const nameListEl = document.getElementById('nameList');
    const resultEl = document.getElementById('result');

    let names = [];
    let startAngle = 0;
    let arc = 0;
    let spinTimeout = null;
    let spinAngleStart = 0;
    let spinTime = 0;
    let spinTimeTotal = 0;

    function drawWheel() {
        const outsideRadius = 180;
        const textRadius = 140;
        const insideRadius = 40;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        arc = Math.PI / (names.length / 2);
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.font = 'bold 14px Arial';

        for (let i = 0; i < names.length; i++) {
            const angle = startAngle + i * arc;
            ctx.fillStyle = i % 2 === 0 ? '#ffcc00' : '#ff9900';

            ctx.beginPath();
            ctx.arc(canvas.width / 2, canvas.height / 2, outsideRadius, angle, angle + arc, false);
            ctx.arc(canvas.width / 2, canvas.height / 2, insideRadius, angle + arc, angle, true);
            ctx.stroke();
            ctx.fill();

            ctx.save();
            ctx.fillStyle = '#000';
            ctx.translate(
                canvas.width / 2 + Math.cos(angle + arc / 2) * textRadius,
                canvas.height / 2 + Math.sin(angle + arc / 2) * textRadius
            );
            ctx.rotate(angle + arc / 2 + Math.PI / 2);
            const text = names[i];
            ctx.fillText(text, -ctx.measureText(text).width / 2, 0);
            ctx.restore();
        }
    }

    function spin() {
        spinAngleStart = Math.random() * 10 + 10;
        spinTime = 0;
        spinTimeTotal = Math.random() * 3000 + 4000;
        rotateWheel();
    }

    function rotateWheel() {
        spinTime += 30;
        if (spinTime >= spinTimeTotal) {
            stopRotateWheel();
            return;
        }
        const spinAngle = spinAngleStart - easeOut(spinTime, 0, spinAngleStart, spinTimeTotal);
        startAngle += (spinAngle * Math.PI / 180);
        drawWheel();
        spinTimeout = setTimeout(rotateWheel, 30);
    }

    function stopRotateWheel() {
        clearTimeout(spinTimeout);
        const degrees = startAngle * 180 / Math.PI + 90;
        const arcd = arc * 180 / Math.PI;
        const index = Math.floor((360 - (degrees % 360)) / arcd);
        const pickedName = names[index];
        resultEl.textContent = `Picked: ${pickedName}`;
        names.splice(index, 1);
        updateNameList();
        drawWheel();
        if (names.length === 0) {
            spinButton.disabled = true;
        }
    }

    function easeOut(t, b, c, d) {
        const ts = (t /= d) * t;
        const tc = ts * t;
        return b + c * (tc + -3 * ts + 3 * t);
    }

    function updateNameList() {
        nameListEl.innerHTML = '';
        names.forEach(name => {
            const li = document.createElement('li');
            li.textContent = name;
            nameListEl.appendChild(li);
        });
        spinButton.disabled = names.length === 0;
    }

    addButton.addEventListener('click', () => {
        const name = nameInput.value.trim();
        if (name && !names.includes(name)) {
            names.push(name);
            updateNameList();
            drawWheel();
            nameInput.value = '';
        }
    });

    spinButton.addEventListener('click', () => {
        if (names.length > 0) {
            spin();
        }
    });

    drawWheel();
</script>
</body>
</html>
